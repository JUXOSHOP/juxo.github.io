<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIOSCO JÃšPITER</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#13c1ac">
    <link rel="icon" type="image/png" href="imagenes/logo-app.png?v=2">
    <style>
        :root { --wallapop-cyan: #13c1ac; --bg-gray: #f7f9fa; --text-main: #253238; --border: #e0e6e9; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-gray); margin: 0; padding-top: 75px; color: var(--text-main); }
        header { position: fixed; top: 0; left: 0; right: 0; height: 65px; background: #fff; display: flex; align-items: center; justify-content: space-between; padding: 0 5%; box-shadow: 0 1px 3px rgba(0,0,0,0.1); z-index: 1000; }
        .logo { color: var(--wallapop-cyan); font-size: 22px; font-weight: 800; text-decoration: none; letter-spacing: -0.5px; }
        .search-box { flex-grow: 1; margin: 0 15px; position: relative; max-width: 450px; }
        .search-box input { width: 100%; padding: 10px 15px 10px 40px; border-radius: 20px; border: 1px solid var(--border); background: #f2f4f5; outline: none; font-size: 14px; }
        .search-box i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #888; }
        .cart-toggle { background: none; border: none; font-size: 20px; cursor: pointer; position: relative; color: var(--text-main); }
        .badge { position: absolute; top: -5px; right: -8px; background: var(--wallapop-cyan); color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px; font-weight: bold; }
        .nav-cats { display: flex; gap: 10px; padding: 15px 5%; background: #fff; border-bottom: 1px solid var(--border); overflow-x: auto; scrollbar-width: none; }
        .chip { padding: 8px 18px; background: #fff; border: 1px solid var(--border); border-radius: 20px; font-size: 14px; font-weight: 600; cursor: pointer; white-space: nowrap; transition: 0.2s; }
        .chip.active { background: var(--wallapop-cyan); color: white; border-color: var(--wallapop-cyan); }
        .container { max-width: 1100px; margin: 20px auto; padding: 0 15px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .card { background: #fff; border-radius: 8px; border: 1px solid var(--border); overflow: hidden; display: flex; flex-direction: column; transition: 0.2s; }
        .card img { width: 100%; height: 160px; object-fit: cover; background: #f9f9f9; }
        .card-body { padding: 12px; flex-grow: 1; display: flex; flex-direction: column; }
        .price { font-size: 18px; font-weight: 800; margin: 0; color: #000; }
        .name { font-size: 13px; color: #666; margin: 4px 0 12px 0; height: 32px; overflow: hidden; line-height: 1.2; }
        .add-btn { width: 100%; padding: 8px; background: #fff; color: var(--wallapop-cyan); border: 2px solid var(--wallapop-cyan); border-radius: 6px; font-weight: 800; cursor: pointer; }
        .cart-sidebar { position: fixed; top: 0; right: -350px; width: 320px; height: 100%; background: #fff; z-index: 2000; box-shadow: -2px 0 15px rgba(0,0,0,0.1); transition: 0.3s; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .cart-sidebar.open { right: 0; }
        .btn-whatsapp { background: #25d366; color: white; text-align: center; padding: 15px; border-radius: 10px; text-decoration: none; font-weight: 800; }
        @media (max-width: 500px) { .grid { grid-template-columns: repeat(2, 1fr); gap: 10px; } }
    </style>
</head>

<body>
    <div id="install-banner" style="display: none; background: #13c1ac; color: white; padding: 15px; position: fixed; bottom: 0; left: 0; width: 100%; z-index: 9999; text-align: center; font-family: sans-serif;">
        <span>Â¡InstalÃ¡ la App de <b>JÃšPITER</b>!</span>
        <button id="btn-install" style="background: white; color: #13c1ac; border: none; padding: 8px 15px; margin-left: 15px; border-radius: 5px; font-weight: bold; cursor: pointer;">INSTALAR</button>
        <button id="btn-close" style="background: transparent; color: white; border: none; margin-left: 10px; font-size: 18px; cursor: pointer;">Ã—</button>
    </div>

    <header>
        <a href="#" class="logo">KIOSCO JÃšPITER</a>
        <div class="search-box">
            <i class="fa fa-search"></i>
            <input type="text" id="mainSearch" placeholder="Busca tu golosina...">
        </div>
        <button class="cart-toggle" onclick="toggleCart()">
            <i class="fa fa-shopping-basket"></i>
            <span class="badge" id="cart-count">0</span>
        </button>
    </header>

    <div class="nav-cats">
        <div class="chip active" onclick="filterData('todos', this)">Todos</div>
        <div class="chip" onclick="filterData('golosinas', this)">Golosinas</div>
        <div class="chip" onclick="filterData('alfajores', this)">Alfajores</div>
        <div class="chip" onclick="filterData('snacks', this)">Snacks</div>
        <div class="chip" onclick="filterData('bebidas', this)">Bebidas</div>
        <div class="chip" onclick="filterData('otros', this)">Otros</div>
    </div>

    <div class="container">
        <div class="grid" id="productGrid"></div>
    </div>

    <div class="cart-sidebar" id="sidebar">
        <div class="cart-header" style="display:flex; justify-content:space-between;">
            <h3 style="margin:0">Mi Pedido</h3>
            <button onclick="toggleCart()" style="border:none; background:none; font-size:24px;">&times;</button>
        </div>
        <ul id="cart-list" style="list-style:none; padding:0; flex-grow:1; overflow-y:auto;"></ul>
        <div class="total-area" id="cart-total" style="font-weight:800; padding:15px 0;">Total: $0</div>
        <a href="javascript:void(0)" class="btn-whatsapp" onclick="sendToWA()">ENVIAR PEDIDO</a>
    </div>

    <script>
        const data = [
            // --- GOLOSINAS ---
            { n: "Globo Bombuchas x100", p: 2000, i: "globo-bombuchas-x-100-un.jpg", c: "otros" },
            { n: "Globo Bombuchas sueltas x25", p: 500, i: "globo-bombuchas-sueltas-x-25-un.jpg", c: "otros" },
            { n: "Girasol Tostalindo 50g", p: 800, i: "girasol-tostalindo-50g.jpg", c: "otros" },
            { n: "Juguito Pepito triple sabor", p: 700, i: "juguito-pepito-triple-sabor.jpg", c: "bebidas" },
            { n: "Juguito Pepito top 2 sabores", p: 500, i: "juguito-pepito-top2-sabores.jpg", c: "bebidas" },
            { n: "Pastillas Lucky x8 un.", p: 100, i: "pastillas-lucky-x-8-un.jpg", c: "golosinas" },
            { n: "Tubitwist TNT Uva 15g", p: 500, i: "tubitwist-tnt-acida-uva-15g.jpg", c: "golosinas" },
            { n: "Tubitwist TNT Frutilla 70g", p: 1500, i: "tubitwist-tnt-acida-frutilla-70g.jpg", c: "golosinas" },
            { n: "Tubitwist TNT Uva 70g", p: 1500, i: "tubitwist-tnt-acida-uva-70g.jpg", c: "golosinas" },
            { n: "Regaliz Bull Dog Billiken 75g", p: 1500, i: "regaliz-bull-dog-billiken-75g.jpg", c: "golosinas" },
            { n: "Malvavisco Gongys 28g", p: 700, i: "malvavisco-gongys-28g.jpg", c: "golosinas" },
            { n: "Heladitos Secos un.", p: 200, i: "heladitos-secos-un.jpg", c: "golosinas" },
            { n: "Gallinitas Surtidas un.", p: 200, i: "gallinitas-surtidas-un.jpg", c: "golosinas" },
            { n: "Chup Pops Evolution", p: 500, i: "chup-pops-evolution-surtido.jpg", c: "golosinas" },
            { n: "Chupetin Mr Pops Fruta", p: 300, i: "chupetin-mr-pops-fruta.jpg", c: "golosinas" },
            { n: "Bizcochuelo Pic Nic un.", p: 1000, i: "bizcochuelo-pic-nic-un.jpg", c: "otros" },
            { n: "Mini Torta Rapsodia", p: 1000, i: "mini-torta-rapsodia.jpg", c: "alfajores" },
            { n: "Alfajor Fulbito Chocolate", p: 400, i: "alfajor-fulbito-chocolate.jpg", c: "alfajores" },
            { n: "Alfajor Fulbito Mani", p: 400, i: "alfajor-fulbito-mani.jpg", c: "alfajores" },
            { n: "Guaymallen Oro 50g", p: 1300, i: "alfajor-guaymallen-oro-50g.jpg", c: "alfajores" },
            { n: "Guaymallen Platino 50g", p: 1300, i: "alfajor-guaymallen-platino-50g.jpg", c: "alfajores" },
            { n: "Fantoche Simple Night 50g", p: 1200, i: "alfajor-fantoche-simple-night-50g.jpg", c: "alfajores" },
            { n: "Fantoche Simple Day 50g", p: 1200, i: "alfajor-fantoche-simple-day-50g.jpg", c: "alfajores" },
            { n: "Turron Fulbito un.", p: 400, i: "turron-fulbito-un.jpg", c: "otros" },
            { n: "Sapito Chocolatoso", p: 500, i: "rospo-sapito-chocolatoso-un.jpg", c: "golosinas" },
            { n: "Sapito Frutilla", p: 500, i: "rospo-sapito-frutilla-un.jpg", c: "golosinas" },
            { n: "Sapito Mani", p: 500, i: "rospo-sapito-mani-un.jpg", c: "golosinas" },
            { n: "Sapito Dulce de Leche", p: 500, i: "rospo-sapito-dulce-de-leche-un.jpg", c: "golosinas" },
            { n: "Chicle Fierita Tutti", p: 100, i: "chicle-fierita-tutti-un.jpg", c: "golosinas" },
            { n: "Chicle Fierita Banana", p: 100, i: "chicle-fierita-banana-un.jpg", c: "golosinas" },
            { n: "Chicle Fierita Rec Frutilla", p: 300, i: "chicle-fierita-rec-frutilla-un.jpg", c: "golosinas" },
            { n: "Chicle Open Candy Sandia", p: 300, i: "chicle-open-candy-sandia-un.jpg", c: "golosinas" },
            { n: "Masticable Misky Frutita", p: 33, i: "masticable-misky-frutita-un.jpg", c: "golosinas" },
            { n: "Tira Acida Marengo x2", p: 100, i: "tira-acida-marengo-x-2-un.jpg", c: "golosinas" },
            { n: "Goma Rollo Misky", p: 100, i: "goma-rollo-misky-un.jpg", c: "golosinas" },
            { n: "Sugus Tradicional", p: 33, i: "sugus-tradicional-un.jpg", c: "golosinas" },
            { n: "Masticable Billiken", p: 33, i: "masticable-billiken-surtido-un.jpg", c: "golosinas" },
            { n: "Mielcita Suschen", p: 100, i: "mielcita-suschen-un.jpg", c: "golosinas" },
            { n: "Chup Crazy Pop Uva", p: 900, i: "chup-crazy-pop-uva-un.jpg", c: "golosinas" },
            { n: "Chup Crazy Pop Frutilla", p: 900, i: "chup-crazy-pop-frutilla-un.jpg", c: "golosinas" },
            { n: "Sugus Confitado 50g", p: 1500, i: "sugus-confitado-tradicional-50g.jpg", c: "golosinas" },
            { n: "Lenguetazo Tutti", p: 400, i: "caramelo-lenguetazo-tutti-un.jpg", c: "golosinas" },
            // --- SNACKS ---
            { n: "Saladix Pizza 100g", p: 1800, i: "saladix-pizza-100g.jpg", c: "snacks" },
            { n: "Saladix JamÃ³n 100g", p: 1800, i: "saladix-jamon-100g.jpg", c: "snacks" },
            { n: "Saladix Parmesano 100g", p: 1800, i: "saladix-parmesano-100g.jpg", c: "snacks" },
            { n: "Saladix Duo 100g", p: 1800, i: "saladix-duo-100g.jpg", c: "snacks" },
            { n: "Josmar Rueditas 40g", p: 800, i: "josmar-rueditas-40g.jpg", c: "snacks" },
            { n: "Conito 4G Queso 65g", p: 1800, i: "conito-4g-queso-65g.jpg", c: "snacks" },
            { n: "Conito 4G Pizza 65g", p: 1800, i: "conito-4g-pizza-65g.jpg", c: "snacks" },
            { n: "Slices Papas ClÃ¡sicas 65g", p: 1800, i: "slices-papas-clÃ¡sicas-65g.jpg", c: "snacks" },
            { n: "Slices Papas Americana 65g", p: 1800, i: "slices-papas-americana-65g.jpg", c: "snacks" },
            { n: "Slices Papas JamÃ³n Serrano 65g", p: 1800, i: "slices-papas-jamon-serrano-65g.jpg", c: "snacks" },
            { n: "Slices Papas Salame 65g", p: 1800, i: "slices-papas-salame-65g.jpg", c: "snacks" },
            { n: "Slices Papas Cheddar 65g", p: 1800, i: "slices-papas-cheddar-65g.jpg", c: "snacks" },
            { n: "Slices Batata 65g", p: 1800, i: "slices-batata-65g.jpg", c: "snacks" },
            { n: "Slices Pancetitas 65g", p: 1800, i: "slices-pancetitas-65g.jpg", c: "snacks" },
            { n: "Slices Papas Pesto 65g", p: 1800, i: "slices-papas-pesto-65g.jpg", c: "snacks" },
            { n: "Slices Papas Provenzal 65g", p: 1800, i: "slices-papas-provenzal-65g.jpg", c: "snacks" },
            { n: "Slices Papas Ketchup 65g", p: 1800, i: "slices-papas-ketchup-65g.jpg", c: "snacks" },
            { n: "Slices Papas Pay 140g", p: 2000, i: "slices-papas-pay-140.jpg", c: "snacks" },
            { n: "Tubo Papas Original 140g", p: 6500, i: "tubo-original-140g.jpg", c: "snacks" },
            { n: "Tubo Papas Cheddar 140g", p: 6500, i: "tubo-cheddar-140g.jpg", c: "snacks" },
            { n: "Tubo Papas Barbacoa 140g", p: 6500, i: "tubo-barbacoa-140g.jpg", c: "snacks" },
            { n: "Tubo Papas Crema y Cebolla", p: 6500, i: "tubo-crema-cebolla-140g.jpg", c: "snacks" },
            { n: "Palito Tradicional 120g", p: 1500, i: "palito-tradicional-120g.jpg", c: "snacks" },
            { n: "Palito Cheddar 120g", p: 1500, i: "palito-cheddar-120g.jpg", c: "snacks" },
            { n: "Palito JamÃ³n 120g", p: 1500, i: "palito-jamon-120g.jpg", c: "snacks" }
        ];

        let cart = [];
        const grid = document.getElementById('productGrid');

        function render(filter = 'todos', search = '') {
            grid.innerHTML = '';
            data.filter(p => (filter === 'todos' || p.c === filter) && p.n.toLowerCase().includes(search.toLowerCase()))
            .forEach(p => {
                grid.innerHTML += `
                <div class="card">
                    <img src="imagenes/${p.i}" onerror="this.src='https://via.placeholder.com/160?text=Kiosco'">
                    <div class="card-body">
                        <p class="price">$${p.p}</p>
                        <p class="name">${p.n}</p>
                        <button class="add-btn" onclick="addToCart('${p.n}', ${p.p})">AÃ±adir</button>
                    </div>
                </div>`;
            });
}



    function sendToWA() {

        if(cart.length === 0) return alert('El carrito estÃ¡ vacÃ­o');

        

        // --- CONFIGURACIÃ“N DE TUS DATOS ---

        const miNumero = "5492345548472"; 

        const miAlias = "jupiter.d";

        // ----------------------------------



        let msg = "Hola! Mi pedido en Kiosco JÃºpiter es:%0A%0A";

        cart.forEach(i => msg += `- ${i.name} ($${i.price})%0A`);

        let total = cart.reduce((a, b) => a + b.price, 0);

        

        msg += "%0A*Total a pagar: $" + total + "*";

        msg += "%0A%0A*Â¿CÃ³mo confirmo?*";

        msg += "%0A1ï¸âƒ£ TransferÃ­ al Alias: *" + miAlias + "*";

        msg += "%0A2ï¸âƒ£ Enviame el comprobante por acÃ¡.";

        msg += "%0A%0Aâš ï¸ *Â¡Te reservo el pedido para que no se agote y lo pasÃ¡s a retirar cuando quieras!* ðŸƒâ€â™‚ï¸ðŸ’¨";

        

        window.open(`https://wa.me/${miNumero}?text=${msg}`);

    }
        function filterData(cat, el) {
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            render(cat, document.getElementById('mainSearch').value);
        }

        document.getElementById('mainSearch').oninput = (e) => render(document.querySelector('.chip.active').innerText.toLowerCase(), e.target.value);
        render();
    </script>

    <script>
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-banner').style.display = 'block';
        });
        document.getElementById('btn-install').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt = null;
                document.getElementById('install-banner').style.display = 'none';
            }
        });
        document.getElementById('btn-close').addEventListener('click', () => {
            document.getElementById('install-banner').style.display = 'none';
        });
    </script>
</body>
</html>
