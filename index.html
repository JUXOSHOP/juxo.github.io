<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tienda estilo Walapop</title>
<style>
body { font-family: Arial; background: #f4f4f4; margin: 0; padding: 20px; }
h1 { text-align: center; }
#buscar { width: 100%; padding: 10px; margin-bottom: 20px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
#categorias { text-align: center; margin-bottom: 20px; }
.boton-categoria { padding: 8px 12px; margin: 5px; cursor: pointer; border: none; background: #007bff; color: #fff; border-radius: 5px; }
.boton-categoria.activo { background: #0056b3; }
.boton-categoria:hover { background: #0056b3; }

#productos { display: grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap: 15px; }
.producto { background: #fff; border-radius: 10px; padding: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
.producto img { width: 100%; border-radius: 8px; margin-bottom: 10px; }
.producto h3 { font-size: 16px; margin: 5px 0; }
.precio { font-weight: bold; color: #28a745; margin-bottom: 5px; }
.stock { font-size: 14px; color: #555; margin-bottom: 10px; }
.agregar { padding: 5px 10px; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
.agregar:hover { background: #0056b3; }

#carrito { margin-top: 30px; background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
#carrito h3 { margin-top: 0; }
#listaCarrito { list-style: none; padding: 0; margin: 0; }
#listaCarrito li { display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px solid #eee; }
#listaCarrito button { background: red; color: #fff; border: none; border-radius: 5px; cursor: pointer; padding: 2px 5px; }
#total { font-weight: bold; margin-top: 10px; }
#comprar { margin-top: 10px; padding: 10px; background: #ff9900; color: #fff; border: none; cursor: pointer; font-size: 16px; border-radius: 5px; width: 100%; }
#comprar:hover { background: #cc7a00; }
</style>
</head>
<body>

<h1>Tienda de Golosinas</h1>

<input type="text" id="buscar" placeholder="Buscar producto...">

<div id="categorias">
  <button class="boton-categoria activo" data-categoria="todos">Todos</button>
  <button class="boton-categoria" data-categoria="golosinas">Golosinas</button>
  <button class="boton-categoria" data-categoria="jugos">Jugos</button>
  <button class="boton-categoria" data-categoria="alfajores">Alfajores</button>
  <button class="boton-categoria" data-categoria="otros">Otros</button>
</div>

<div id="productos">
  <!-- Ejemplo de productos -->
  <div class="producto" data-categoria="golosinas">
    <img src="imagenes/globo-bombuchas-x-100-un.jpg" alt="">
    <h3>Globo Bombuchas x100</h3>
    <div class="precio">$2.000</div>
    <div class="stock">Disponible</div>
    <button class="agregar">Agregar al carrito</button>
  </div>
  <div class="producto" data-categoria="jugos">
    <img src="imagenes/juguito-pepito-triple-sabor.jpg" alt="">
    <h3>Juguito Pepito triple sabor</h3>
    <div class="precio">$700</div>
    <div class="stock">Disponible</div>
    <button class="agregar">Agregar al carrito</button>
  </div>
  <div class="producto" data-categoria="alfajores">
    <img src="imagenes/alfajor-fulbito-chocolate.jpg" alt="">
    <h3>Alfajor Fulbito Chocolate</h3>
    <div class="precio">$400</div>
    <div class="stock">Disponible</div>
    <button class="agregar">Agregar al carrito</button>
  </div>
</div>

<div id="carrito">
  <h3>Carrito</h3>
  <ul id="listaCarrito"></ul>
  <div id="total">Total: $0</div>
  <button id="comprar">Comprar con Mercado Pago</button>
</div>

<script>
// FILTRO PRODUCTOS
const inputBuscar = document.getElementById('buscar');
const productos = document.querySelectorAll('.producto');
const botones = document.querySelectorAll('.boton-categoria');

function filtrarProductos() {
  const texto = inputBuscar.value.toLowerCase();
  const categoriaActiva = document.querySelector('.boton-categoria.activo')?.dataset.categoria || 'todos';
  productos.forEach(producto => {
    const nombre = producto.querySelector('h3').textContent.toLowerCase();
    const categoria = producto.dataset.categoria;
    producto.style.display = (nombre.includes(texto) && (categoriaActiva === 'todos' || categoria === categoriaActiva)) ? 'block' : 'none';
  });
}

inputBuscar.addEventListener('input', filtrarProductos);
botones.forEach(boton => {
  boton.addEventListener('click', () => {
    botones.forEach(b => b.classList.remove('activo'));
    boton.classList.add('activo');
    filtrarProductos();
  });
});

// CARRITO DINÁMICO
let carrito = [];
const listaCarrito = document.getElementById('listaCarrito');
const totalDiv = document.getElementById('total');

function actualizarCarrito() {
  listaCarrito.innerHTML = '';
  let total = 0;
  carrito.forEach((item,index) => {
    const li = document.createElement('li');
    li.textContent = `${item.nombre} - ${item.precio}`;
    const eliminar = document.createElement('button');
    eliminar.textContent = 'X';
    eliminar.onclick = () => { carrito.splice(index,1); actualizarCarrito(); };
    li.appendChild(eliminar);
    listaCarrito.appendChild(li);

    total += Number(item.precio.replace(/\./g,'').replace('$',''));
  });
  totalDiv.textContent = `Total: $${total}`;
}

// AGREGAR PRODUCTOS
document.querySelectorAll('.agregar').forEach(btn => {
  btn.addEventListener('click', () => {
    const producto = btn.closest('.producto');
    const nombre = producto.querySelector('h3').textContent;
    const precio = producto.querySelector('.precio').textContent;
    carrito.push({nombre, precio});
    actualizarCarrito();
  });
});

// BOTÓN COMPRAR CON MERCADO PAGO
document.getElementById('comprar').addEventListener('click', () => {
  if(carrito.length === 0) { alert('El carrito está vacío'); return; }

  // TOTAL
  let total = 0;
  carrito.forEach(item => { total += Number(item.precio.replace(/\./g,'').replace('$','')); });

  // LINK MERCADO PAGO (reemplazar TU_LINK_MP)
  const urlMP = 'https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=TU_LINK_MP';
  window.open(urlMP,'_blank');
});
</script>

</body>
</html>
